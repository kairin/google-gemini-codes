---
interface Tab {
  id: string;
  label: string;
  icon: string;
}
interface Props {
  tabs: Tab[];
}
const { tabs } = Astro.props;
---
<div class="tab-interface-container bg-white dark:bg-slate-800 shadow-md rounded-lg overflow-hidden border dark:border-slate-700">
    <div class="border-b border-slate-200 dark:border-slate-700">
        <nav class="flex flex-wrap justify-center -mb-px" role="tablist">
            {tabs.map((tab, index) => (
                <button
                    type="button"
                    data-tab-button={tab.id}
                    class:list={["tab-btn text-sm sm:text-base py-4 px-3 sm:px-6", { 'active': index === 0 }]}
                    role="tab"
                    aria-selected={index === 0 ? "true" : "false"}
                    aria-controls={`tab-content-${tab.id}`}
                    id={`tab-${tab.id}`}
                >
                    <i class:list={["fas", tab.icon, "mr-2"]}></i>{tab.label}
                </button>
            ))}
        </nav>
    </div>
    <div class="p-6 md:p-8">
        <slot />
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        const allTabContainers = document.querySelectorAll('.tab-interface-container');

        allTabContainers.forEach(container => {
            const tabButtons = container.querySelectorAll('[data-tab-button]');
            const tabContents = Array.from(container.querySelectorAll('[data-tab-content]'));

            function showTab(tabId) {
                tabButtons.forEach(btn => {
                    const isActive = btn.getAttribute('data-tab-button') === tabId;
                    btn.classList.toggle('active', isActive);
                    btn.setAttribute('aria-selected', String(isActive));
                });
                tabContents.forEach(content => {
                    const isVisible = content.getAttribute('data-tab-content') === tabId;
                    content.classList.toggle('hidden', !isVisible);
                });
            }

            const defaultTabId = tabButtons[0]?.getAttribute('data-tab-button');
            if (defaultTabId) showTab(defaultTabId);

            tabButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const tabId = button.getAttribute('data-tab-button');
                    if (tabId) showTab(tabId);
                });
            });
        });
    });
</script>

<style>
    .tab-btn {
        transition: all 0.3s ease;
        border-bottom: 3px solid transparent;
        cursor: pointer;
        color: #4B5563; /* Gray-600 */
    }
    .dark .tab-btn {
        color: #D1D5DB; /* Gray-300 */
    }
    .tab-btn.active {
        border-bottom-color: #3B82F6; /* Blue-500 */
        color: #3B82F6;
        font-weight: 600;
    }
    .dark .tab-btn.active {
        border-bottom-color: #60A5FA; /* Blue-400 */
        color: #60A5FA;
    }
</style>
