---
// The ONLY change is updating these import paths to be robust for the build process.
import BaseLayout from '@/layouts/BaseLayout.astro';
import Card from '@/components/Card.astro';
import ReactGirihDesigner from '@/components/ReactGirihDesigner.astro';
import ReactQuasicrystals from '@/components/ReactQuasicrystals.astro';
---
<BaseLayout title="Ancient Sophistication" description="The mathematics of Girih tiles and tessellation in Islamic architecture.">

    <header class="bg-white/80 dark:bg-slate-900/80 backdrop-blur-lg sticky top-[72px] z-40 border-b dark:border-slate-700 -mx-4 px-4 mb-12">
        <div class="container mx-auto flex justify-between items-center py-3">
            <h2 class="text-xl font-bold text-gray-800 dark:text-slate-100">Ancient Sophistication</h2>
            <nav class="hidden md:flex flex-wrap justify-center items-center gap-x-6">
                <a href="#introduction" class="nav-link active">Introduction</a>
                <a href="#the-tiles" class="nav-link">The Tiles</a>
                <a href="#designer" class="nav-link">Designer</a>
                <a href="#deep-dive" class="nav-link">Deep Dive</a>
            </nav>
        </div>
    </header>

    <div class="container mx-auto">
        <section id="introduction" class="text-center py-16">
            <h1 class="section-title text-4xl md:text-5xl font-bold mb-4 dark:text-slate-100">An Integration of Knowledge</h1>
            <p class="max-w-3xl mx-auto text-lg text-gray-600 dark:text-slate-300">
                The geometric ornamentation in Islamic art reveals a profound mathematical understanding. This exploration focuses on Girih patterns, which are based on a set of five fundamental tiles that interlock to form complex and intricate tessellations.
            </p>
            <div class="grid md:grid-cols-3 gap-8 my-12 max-w-6xl mx-auto text-left">
                <Card href="#the-tiles" icon="fa-solid fa-infinity" title="Mathematical Wisdom" blurb="Girih patterns create aperiodic arrangements, predating the modern discovery of quasicrystals." />
                <Card href="#designer" icon="fa-solid fa-compass-drafting" title="Artisans as Pioneers" blurb="Medieval artisans used simple tools and deep geometric knowledge to create these elaborate patterns." />
                <Card href="#deep-dive" icon="fa-solid fa-eye" title="A Different Way of Seeing" blurb="The visual pattern is created by lines drawn on the tiles, not the tile boundaries themselves." />
            </div>
        </section>

        <section id="the-tiles" class="py-16">
            <div class="text-center">
                 <h1 class="section-title text-4xl md:text-5xl font-bold mb-4 dark:text-slate-100">The Five Fundamental Girih Tiles</h1>
                 <p class="max-w-3xl mx-auto text-lg text-gray-600 dark:text-slate-300">All Girih tiles have sides of the same length, and all their angles are multiples of 36Â°, allowing them to fit together seamlessly.</p>
            </div>
            <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-6 my-12 max-w-7xl mx-auto text-center">
                 <div class="bg-white dark:bg-slate-800 p-4 rounded-lg shadow-md border dark:border-slate-700"><svg viewBox="0 0 100 100" class="w-24 h-24 mx-auto mb-2"><polygon points="50,5 89,23 89,77 50,95 11,77 11,23" class="fill-blue-100 dark:fill-blue-900/50 stroke-blue-500 dark:stroke-blue-400" stroke-width="2"/></svg><h3 class="font-semibold dark:text-slate-200">Decagon</h3></div>
                 <div class="bg-white dark:bg-slate-800 p-4 rounded-lg shadow-md border dark:border-slate-700"><svg viewBox="0 0 100 100" class="w-24 h-24 mx-auto mb-2"><polygon points="50,5 95,41 79,95 21,95 5,41" class="fill-green-100 dark:fill-green-900/50 stroke-green-500 dark:stroke-green-400" stroke-width="2"/></svg><h3 class="font-semibold dark:text-slate-200">Pentagon</h3></div>
                 <div class="bg-white dark:bg-slate-800 p-4 rounded-lg shadow-md border dark:border-slate-700"><svg viewBox="0 0 100 100" class="w-24 h-24 mx-auto mb-2"><polygon points="5,5 95,5 50,50 95,95 5,95 50,50" class="fill-purple-100 dark:fill-purple-900/50 stroke-purple-500 dark:stroke-purple-400" stroke-width="2"/></svg><h3 class="font-semibold dark:text-slate-200">Bow Tie</h3></div>
                 <div class="bg-white dark:bg-slate-800 p-4 rounded-lg shadow-md border dark:border-slate-700"><svg viewBox="0 0 100 100" class="w-24 h-24 mx-auto mb-2"><polygon points="21,5 79,5 95,50 79,95 21,95 5,50" class="fill-red-100 dark:fill-red-900/50 stroke-red-500 dark:stroke-red-400" stroke-width="2"/></svg><h3 class="font-semibold dark:text-slate-200">Elongated Hexagon</h3></div>
                 <div class="bg-white dark:bg-slate-800 p-4 rounded-lg shadow-md border dark:border-slate-700"><svg viewBox="0 0 100 100" class="w-24 h-24 mx-auto mb-2"><polygon points="50,5 95,50 50,95 5,50" class="fill-yellow-100 dark:fill-yellow-900/50 stroke-yellow-500 dark:stroke-yellow-400" stroke-width="2"/></svg><h3 class="font-semibold dark:text-slate-200">Rhombus</h3></div>
            </div>
        </section>

        <section id="designer" class="py-16">
            <div class="text-center">
                <h1 class="section-title text-4xl md:text-5xl font-bold mb-4 dark:text-slate-100">Interactive Girih Tile Designer</h1>
                <p class="max-w-3xl mx-auto text-lg text-gray-600 dark:text-slate-300">Below is a fully interactive Girih tile editor, built with React and rendered within this Astro page. Use the controls to add, undo, and change tile shapes and colors.</p>
            </div>
            <div class="my-12 text-center">
                <ReactGirihDesigner />
            </div>
        </section>

        <section id="deep-dive" class="py-16">
            <div class="text-center">
                <h1 class="section-title text-4xl md:text-5xl font-bold mb-4 dark:text-slate-100">Quasicrystals Deep Dive</h1>
                <p class="max-w-3xl mx-auto text-lg text-gray-600 dark:text-slate-300">For more information, this second interactive application provides a deeper exploration into the structure and properties of quasicrystalline patterns.</p>
            </div>
            <div class="my-12 text-center">
                <ReactQuasicrystals />
            </div>
        </section>
    </div>
</BaseLayout>

<style>
  .nav-link {
    @apply text-gray-600 dark:text-slate-300 hover:text-blue-600 dark:hover:text-blue-400 transition-colors py-1 border-b-2 border-transparent;
  }
  .nav-link.active {
    @apply text-blue-600 dark:text-blue-400 border-blue-600 dark:border-blue-400 font-semibold;
  }
</style>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        const navLinks = document.querySelectorAll('a.nav-link[href^="#"]');
        const sections = document.querySelectorAll('section[id]');

        navLinks.forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const targetId = this.getAttribute('href');
                const targetElement = document.querySelector(targetId);
                targetElement?.scrollIntoView({ behavior: 'smooth', block: 'start' });
            });
        });

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    const id = entry.target.getAttribute('id');
                    navLinks.forEach(link => {
                        link.classList.toggle('active', link.getAttribute('href') === `#${id}`);
                    });
                }
            });
        }, { 
            rootMargin: '-80px 0px -80% 0px' 
        });

        sections.forEach(section => {
            observer.observe(section);
        });
    });
</script>
